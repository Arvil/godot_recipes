<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.111.2"><meta name=generator content="Relearn 5.12.5+tip"><meta name=description content><title>Context-based steering :: Godot 3 Recipes</title><link href=/godot_recipes/3.x/css/gd-icon-font.css?1680630046 rel=stylesheet><link href=/godot_recipes/3.x/css/fontawesome-all.min.css?1680630046 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/godot_recipes/3.x/css/fontawesome-all.min.css?1680630046 rel=stylesheet></noscript><link href=/godot_recipes/3.x/css/nucleus.css?1680630046 rel=stylesheet><link href=/godot_recipes/3.x/css/auto-complete.css?1680630046 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/godot_recipes/3.x/css/auto-complete.css?1680630046 rel=stylesheet></noscript><link href=/godot_recipes/3.x/css/perfect-scrollbar.min.css?1680630046 rel=stylesheet><link href=/godot_recipes/3.x/css/fonts.css?1680630046 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/godot_recipes/3.x/css/fonts.css?1680630046 rel=stylesheet></noscript><link href=/godot_recipes/3.x/css/theme.css?1680630046 rel=stylesheet><link href=/godot_recipes/3.x/css/theme-auto.css?1680630046 rel=stylesheet id=variant-style><link href=/godot_recipes/3.x/css/variant.css?1680630046 rel=stylesheet><link href=/godot_recipes/3.x/css/print.css?1680630046 rel=stylesheet media=print><link href=/godot_recipes/3.x/css/ie.css?1680630046 rel=stylesheet><script src=/godot_recipes/3.x/js/url.js?1680630046></script>
<script src=/godot_recipes/3.x/js/variant.js?1680630046></script>
<script>window.index_json_url="/godot_recipes/3.x/index.json";var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://godotrecipes.com/godot_recipes/3.x/",window.variants&&variants.init(["auto","relearn-light","relearn-dark","neon"])</script><link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500" rel=stylesheet><style type=text/css>pre code{white-space:pre}</style></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=/godot_recipes/3.x/ai/context_map/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/godot_recipes/3.x/index.html><span itemprop=name>Home</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/godot_recipes/3.x/ai/index.html><span itemprop=name>AI/Behavior</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Context-based steering</span><meta itemprop=position content="3"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper><nav id=TableOfContents><ul><li><a href=#problem>Problem</a></li><li><a href=#solution>Solution</a><ul><li><a href=#the-algorithm>The Algorithm</a></li><li><a href=#finding-interest>Finding Interest</a></li><li><a href=#the-code>The Code</a></li><li><a href=#example-in-practice>Example in Practice</a></li><li><a href=#wrapping-up>Wrapping up</a></li></ul></li><li><a href=#related-recipes>Related recipes</a><ul><li></li></ul></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><div class="corner-ribbon top-right sticky green"><a href=/godot_recipes/4.x/>3.x</a></div><article class=default><h1 id=context-based-steering>Context-based steering</h1><h2 id=problem>Problem</h2><p>You need an AI-controlled object in your game that can follow a path, avoid obstacles, and make other decisions about how to move around the world.</p><h2 id=solution>Solution</h2><p>&ldquo;Steering behavior&rdquo; is the blanket term for a variety of algorithms that you can use to solve this problem. Which one you choose will depend on your game, the type of world the object lives in, and what type of &ldquo;intelligence&rdquo; you want it to have.</p><p>In this example, we&rsquo;re going to use a method called &ldquo;Context Behavior&rdquo;, which aims to give the object enough information about the world to make a choice of how to move. For additional reading on this subject, see the following links:</p><ul><li><p><a href=https://andrewfray.wordpress.com/2013/03/26/context-behaviours-know-how-to-share/ target=_blank>Andrew Fray: Context Behaviours Know How to Share</a></p></li><li><p><a href=https://jameskeats.com/portfolio/contextbhvr.html target=_blank>James Keats: AI Context Behaviors</a></p></li></ul><p>For this demo, we&rsquo;ll use a generic &ldquo;Agent&rdquo; object. In your game, this might be a car driving around a track, a monster patrolling a dungeon, or some other kind of game entity. Our agent will use a <i class=gd-KinematicBody2D></i><code>KinematicBody2D</code>, but remember, you can use this technique with any kind of object - the algorithm is about the entity choosing a direction to move, how it moves is entirely separate.</p><h3 id=the-algorithm>The Algorithm</h3><p>To begin, let&rsquo;s imagine our agent has a number of rays extending in all directions (we&rsquo;ll talk about how many to use later - for now let&rsquo;s use 8).</p><p><a href=#image-2364bfabe993f7da5d36a6217d1482eb class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_01.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-2364bfabe993f7da5d36a6217d1482eb><img src=/godot_recipes/3.x/img/ai_context_01.png alt=alt class=lightbox-image loading=lazy></a></p><p>In our agent&rsquo;s script, we&rsquo;ll store an array called <code>interest</code>, tracking in which directions the agent wants to go.</p><p><a href=#image-f2666a529d19676fcfc7b915c504abb1 class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_04.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-f2666a529d19676fcfc7b915c504abb1><img src=/godot_recipes/3.x/img/ai_context_04.png alt=alt class=lightbox-image loading=lazy></a></p><p>Of course, if they&rsquo;re all the same, then it can&rsquo;t move - it wants to go in all directions equally! So lets consider that it has a preference - it mostly wants to go forward:</p><p><a href=#image-f62f24dadcb51b6b2da14868d02390b2 class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_03.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-f62f24dadcb51b6b2da14868d02390b2><img src=/godot_recipes/3.x/img/ai_context_03.png alt=alt class=lightbox-image loading=lazy></a></p><p>In this case, the <code>interest</code> array would look like this:</p><p><a href=#image-1e044ed1cfd7455536551f8fd1557ef2 class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_05.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-1e044ed1cfd7455536551f8fd1557ef2><img src=/godot_recipes/3.x/img/ai_context_05.png alt=alt class=lightbox-image loading=lazy></a></p><p>The strongest desire is to go forward, but forward-left and forward-right are acceptible as well. But what if an obstacle appears?</p><p><a href=#image-e849aa4bcb9015b564272c3e9e1efd3d class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_06.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-e849aa4bcb9015b564272c3e9e1efd3d><img src=/godot_recipes/3.x/img/ai_context_06.png alt=alt class=lightbox-image loading=lazy></a></p><p>Now we&rsquo;ll introduce a second array, <code>danger</code>, that indicates directions that are not preferred.</p><p><a href=#image-2615f468104885fccc218760ad425f9a class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_07.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-2615f468104885fccc218760ad425f9a><img src=/godot_recipes/3.x/img/ai_context_07.png alt=alt class=lightbox-image loading=lazy></a></p><p>Combining these two arrays, we can eliminate any <code>interest</code> directions that are also contained in <code>danger</code>. By summing up the remaining <code>interest</code> directions, we&rsquo;re left with a new direction pointing away from the obstacle.</p><p><a href=#image-4ce6601e2f1ea8468afbf2c646e178d3 class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_08.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-4ce6601e2f1ea8468afbf2c646e178d3><img src=/godot_recipes/3.x/img/ai_context_08.png alt=alt class=lightbox-image loading=lazy></a></p><p>To summarize:</p><ol><li>Find the object&rsquo;s <code>interest</code> directions.</li><li>Find the directions that contain <code>danger</code>.</li><li>Eliminate any <code>interest</code> directions that are dangerous.</li><li>Sum the remaining <code>interest</code> directions to find the new heading.</li></ol><h3 id=finding-interest>Finding Interest</h3><p>This will vary depending on what your agent&rsquo;s goal is. If it&rsquo;s to chase the player, then the <code>interest</code> values should be high in the direction of the player. You can even have multiple targets: closer goals have higher interest, but if an obstacle cancels them out, the lower scoring goals will win.</p><p>For this demo, we&rsquo;re going to imagine we&rsquo;re making a racing game of some kind. The AI-controlled cars need to make it around the track: their <code>interest</code> array should be pointing forward along the track, so they don&rsquo;t start going backwards.</p><p>There are a few ways to do this, and in order to keep our agents from needing to know the implementation details, we&rsquo;ll have the track <em>tell</em> them which way to go based on their position. At any time if you ask the track which way is correct, it will tell you.</p><h3 id=the-code>The Code</h3><p>Here&rsquo;s the code for our agent. We start with the exported values: movement parameters and other values we want to be able to adjust easily. <code>look_ahead</code>, for example, is how far ahead the <code>danger</code> rays will detect obstacles.</p><p>Note that we&rsquo;ve made the <code>num_rays</code> adjustable, so that you can find the number that works best for your situation. We&rsquo;ll talk below about the tradeoffs and benefits of larger numbers of rays.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>extends</span> <span style=color:#bf616a>KinematicBody2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>export</span> <span style=color:#81a1c1;font-weight:700>var</span> max_speed <span style=color:#81a1c1>=</span> <span style=color:#b48ead>350</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>export</span> <span style=color:#81a1c1;font-weight:700>var</span> steer_force <span style=color:#81a1c1>=</span> <span style=color:#b48ead>0.1</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>export</span> <span style=color:#81a1c1;font-weight:700>var</span> look_ahead <span style=color:#81a1c1>=</span> <span style=color:#b48ead>100</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>export</span> <span style=color:#81a1c1;font-weight:700>var</span> num_rays <span style=color:#81a1c1>=</span> <span style=color:#b48ead>8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#616e87;font-style:italic># context array</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>var</span> ray_directions <span style=color:#81a1c1>=</span> <span style=color:#eceff4>[]</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>var</span> interest <span style=color:#81a1c1>=</span> <span style=color:#eceff4>[]</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>var</span> danger <span style=color:#81a1c1>=</span> <span style=color:#eceff4>[]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>var</span> chosen_dir <span style=color:#81a1c1>=</span> <span style=color:#bf616a>Vector2</span><span style=color:#81a1c1>.</span>ZERO
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>var</span> velocity <span style=color:#81a1c1>=</span> <span style=color:#bf616a>Vector2</span><span style=color:#81a1c1>.</span>ZERO
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>var</span> acceleration <span style=color:#81a1c1>=</span> <span style=color:#bf616a>Vector2</span><span style=color:#81a1c1>.</span>ZERO
</span></span></code></pre></div><p>Next, we have <code>_ready()</code> where we size the arrays properly and populate the <code>ray_directions</code> array with the actual ray vectors, distributing them evenly around the circle based on <code>num_rays</code>. We begin with no rotation, so <code>Vector2.RIGHT</code> is forward.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> _ready<span style=color:#eceff4>():</span>
</span></span><span style=display:flex><span>    interest<span style=color:#81a1c1>.</span>resize<span style=color:#eceff4>(</span>num_rays<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    danger<span style=color:#81a1c1>.</span>resize<span style=color:#eceff4>(</span>num_rays<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    ray_directions<span style=color:#81a1c1>.</span>resize<span style=color:#eceff4>(</span>num_rays<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> i <span style=color:#81a1c1;font-weight:700>in</span> num_rays<span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>var</span> angle <span style=color:#81a1c1>=</span> i <span style=color:#81a1c1>*</span> <span style=color:#b48ead>2</span> <span style=color:#81a1c1>*</span> PI <span style=color:#81a1c1>/</span> num_rays
</span></span><span style=display:flex><span>        ray_directions<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span> <span style=color:#81a1c1>=</span> <span style=color:#bf616a>Vector2</span><span style=color:#81a1c1>.</span>RIGHT<span style=color:#81a1c1>.</span>rotated<span style=color:#eceff4>(</span>angle<span style=color:#eceff4>)</span>
</span></span></code></pre></div><p>In <code>_physics_process()</code> we&rsquo;ll populate the context arrays and execute the movement. Note we&rsquo;ve broken the steps of the algorithm in to separate functions. Once we&rsquo;ve found our chosen direction, we turn towards it as much as possible (based on <code>steer_force</code>) and move.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> _physics_process<span style=color:#eceff4>(</span>delta<span style=color:#eceff4>):</span>
</span></span><span style=display:flex><span>    set_interest<span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    set_danger<span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    choose_direction<span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>var</span> desired_velocity <span style=color:#81a1c1>=</span> chosen_dir<span style=color:#81a1c1>.</span>rotated<span style=color:#eceff4>(</span>rotation<span style=color:#eceff4>)</span> <span style=color:#81a1c1>*</span> max_speed
</span></span><span style=display:flex><span>    velocity <span style=color:#81a1c1>=</span> velocity<span style=color:#81a1c1>.</span>linear_interpolate<span style=color:#eceff4>(</span>desired_velocity<span style=color:#eceff4>,</span> steer_force<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    rotation <span style=color:#81a1c1>=</span> velocity<span style=color:#81a1c1>.</span>angle<span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    move_and_collide<span style=color:#eceff4>(</span>velocity <span style=color:#81a1c1>*</span> delta<span style=color:#eceff4>)</span>
</span></span></code></pre></div><p>Now we&rsquo;ll go over the 3 functions that make up the algorithm. first, setting the <code>interest</code> array. As mentioned above, we&rsquo;re going to ask the world (our <code>owner</code> in this case) to tell us which direction we should be trying to go.</p><p>Using each ray direction, we take the <em>dot product</em> with the given path direction. Recall that the dot product of two aligned vectors is <code>1</code> and for two perpendicular vectors it&rsquo;s <code>0</code>. We ignore negative values - 0 means we don&rsquo;t want to go that way.</p><p>For example, with 32 rays, the <code>interest</code> would look like this:</p><p><a href=#image-459e289cf9f9f974949e61402ce6718e class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_09.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-459e289cf9f9f974949e61402ce6718e><img src=/godot_recipes/3.x/img/ai_context_09.png alt=alt class=lightbox-image loading=lazy></a></p><p>As a safety measure, if there&rsquo;s no owner to tell us a direction, we&rsquo;ll default to trying to go forward.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> set_interest<span style=color:#eceff4>():</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># Set interest in each slot based on world direction</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>if</span> owner <span style=color:#81a1c1;font-weight:700>and</span> owner<span style=color:#81a1c1>.</span>has_method<span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;get_path_direction&#34;</span><span style=color:#eceff4>):</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>var</span> path_direction <span style=color:#81a1c1>=</span> owner<span style=color:#81a1c1>.</span>get_path_direction<span style=color:#eceff4>(</span>position<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>for</span> i <span style=color:#81a1c1;font-weight:700>in</span> num_rays<span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>            <span style=color:#81a1c1;font-weight:700>var</span> d <span style=color:#81a1c1>=</span> ray_directions<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span><span style=color:#81a1c1>.</span>rotated<span style=color:#eceff4>(</span>rotation<span style=color:#eceff4>)</span><span style=color:#81a1c1>.</span>dot<span style=color:#eceff4>(</span>path_direction<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>            interest<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span> <span style=color:#81a1c1>=</span> <span style=color:#81a1c1>max</span><span style=color:#eceff4>(</span><span style=color:#b48ead>0</span><span style=color:#eceff4>,</span> d<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># If no world path, use default interest</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>else</span><span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        set_default_interest<span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> set_default_interest<span style=color:#eceff4>():</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># Default to moving forward</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> i <span style=color:#81a1c1;font-weight:700>in</span> num_rays<span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>var</span> d <span style=color:#81a1c1>=</span> ray_directions<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span><span style=color:#81a1c1>.</span>rotated<span style=color:#eceff4>(</span>rotation<span style=color:#eceff4>)</span><span style=color:#81a1c1>.</span>dot<span style=color:#eceff4>(</span>transform<span style=color:#81a1c1>.</span>x<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>        interest<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span> <span style=color:#81a1c1>=</span> <span style=color:#81a1c1>max</span><span style=color:#eceff4>(</span><span style=color:#b48ead>0</span><span style=color:#eceff4>,</span> d<span style=color:#eceff4>)</span>
</span></span></code></pre></div><p>Now we can populate the <code>danger</code> array. Using the <code>Physics2DDirectSpaceState</code>, we cast a ray in each direction. If there&rsquo;s a hit, we add a <code>1</code> in that spot.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> set_danger<span style=color:#eceff4>():</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># Cast rays to find danger directions</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>var</span> space_state <span style=color:#81a1c1>=</span> get_world_2d<span style=color:#eceff4>()</span><span style=color:#81a1c1>.</span>direct_space_state
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> i <span style=color:#81a1c1;font-weight:700>in</span> num_rays<span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>var</span> result <span style=color:#81a1c1>=</span> space_state<span style=color:#81a1c1>.</span>intersect_ray<span style=color:#eceff4>(</span>position<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>                position <span style=color:#81a1c1>+</span> ray_directions<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span><span style=color:#81a1c1>.</span>rotated<span style=color:#eceff4>(</span>rotation<span style=color:#eceff4>)</span> <span style=color:#81a1c1>*</span> look_ahead<span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>                <span style=color:#eceff4>[</span>self<span style=color:#eceff4>])</span>
</span></span><span style=display:flex><span>        danger<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span> <span style=color:#81a1c1>=</span> <span style=color:#b48ead>1.0</span> <span style=color:#81a1c1;font-weight:700>if</span> result <span style=color:#81a1c1;font-weight:700>else</span> <span style=color:#b48ead>0.0</span>
</span></span></code></pre></div><p>Finally, we can use the context arrays to choose our direction. Looping through the <code>danger</code> array, zero the <code>interest</code> wherever there&rsquo;s danger. Then, sum up and normalize the remaining interest vectors.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> choose_direction<span style=color:#eceff4>():</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># Eliminate interest in slots with danger</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> i <span style=color:#81a1c1;font-weight:700>in</span> num_rays<span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        <span style=color:#81a1c1;font-weight:700>if</span> danger<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span> <span style=color:#81a1c1>&gt;</span> <span style=color:#b48ead>0.0</span><span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>            interest<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span> <span style=color:#81a1c1>=</span> <span style=color:#b48ead>0.0</span>
</span></span><span style=display:flex><span>    <span style=color:#616e87;font-style:italic># Choose direction based on remaining interest</span>
</span></span><span style=display:flex><span>    chosen_dir <span style=color:#81a1c1>=</span> <span style=color:#bf616a>Vector2</span><span style=color:#81a1c1>.</span>ZERO
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>for</span> i <span style=color:#81a1c1;font-weight:700>in</span> num_rays<span style=color:#eceff4>:</span>
</span></span><span style=display:flex><span>        chosen_dir <span style=color:#81a1c1>+=</span> ray_directions<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span> <span style=color:#81a1c1>*</span> interest<span style=color:#eceff4>[</span>i<span style=color:#eceff4>]</span>
</span></span><span style=display:flex><span>    chosen_dir <span style=color:#81a1c1>=</span> chosen_dir<span style=color:#81a1c1>.</span>normalized<span style=color:#eceff4>()</span>
</span></span></code></pre></div><h3 id=example-in-practice>Example in Practice</h3><p>Let&rsquo;s try it out in action! Here, we&rsquo;ve created a track using a <i class=gd-Path2D></i><code>Path2D</code> and some collision polygons.</p><p><a href=#image-4102be811aa11dec14fc2413af3ad543 class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_11.png alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-4102be811aa11dec14fc2413af3ad543><img src=/godot_recipes/3.x/img/ai_context_11.png alt=alt class=lightbox-image loading=lazy></a></p><p>In the script for this scene, we have a <code>get_path_direction()</code> function. Given a position, this function finds the closest point on the path and puts the <code>PathFollow2D</code> there in order to find the forward direction.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>func</span> get_path_direction<span style=color:#eceff4>(</span>pos<span style=color:#eceff4>):</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>var</span> offset <span style=color:#81a1c1>=</span> path<span style=color:#81a1c1>.</span>curve<span style=color:#81a1c1>.</span>get_closest_offset<span style=color:#eceff4>(</span>pos<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>    path_follow<span style=color:#81a1c1>.</span>offset <span style=color:#81a1c1>=</span> offset
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> path_follow<span style=color:#81a1c1>.</span>transform<span style=color:#81a1c1>.</span>x
</span></span></code></pre></div><p>We&rsquo;ve randomized the speeds of the agents do get some variety. Notice how the fast one finds ways to dodge around the slow ones.</p><p><a href=#image-02564824327cc69961ce24f0fe19bdad class=lightbox-link><img src=/godot_recipes/3.x/img/ai_context_10.gif alt=alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-02564824327cc69961ce24f0fe19bdad><img src=/godot_recipes/3.x/img/ai_context_10.gif alt=alt class=lightbox-image loading=lazy></a></p><h3 id=wrapping-up>Wrapping up</h3><p>This method is very flexible and can be extended to produce a wide variety of complex-looking behaviors. It</p><p>Here are some additional suggestions for adaptations/improvements:</p><ul><li>Levels of danger</li></ul><p>When populating the <code>danger</code> array, don&rsquo;t just use <code>0</code> or <code>1</code>, but instead calculate a danger &ldquo;score&rdquo; based on the distance of the object. Then subtract that amount from the <code>interest</code> rather than removing it. Far away objects will have a small impact while close ones will have more.</p><ul><li>Avoidance</li></ul><p>Rather than a danger item canceling the interest, it could <em>add</em> to the interest in the opposite direction.</p><h2 id=related-recipes>Related recipes</h2><ul><li><a href=/godot_recipes/3.x/math/dot_cross_product/>Vectors: Using Dot and Cross Product</a></li></ul><h4 id=like-video>Like video?</h4><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/dzqtF_CmX-I style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation><div id=header-wrapper class=default-animation><div id=header class=default-animation><div style=padding:8px><a href=/godot_recipes/3.x/><img src=/godot_recipes/3.x/images/kcc_logo_square.png></a></div></div><a href=https://www.patreon.com/kidscancode><img src=/godot_recipes/3.x/images/become_a_patron_button.png></a><div class="searchbox default-animation"><i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script>var contentLangs=["en"]</script><script src=/godot_recipes/3.x/js/auto-complete.js?1680630046 defer></script>
<script src=/godot_recipes/3.x/js/lunr/lunr.min.js?1680630046 defer></script>
<script src=/godot_recipes/3.x/js/lunr/lunr.stemmer.support.min.js?1680630046 defer></script>
<script src=/godot_recipes/3.x/js/lunr/lunr.multi.min.js?1680630046 defer></script>
<script src=/godot_recipes/3.x/js/lunr/lunr.en.min.js?1680630046 defer></script>
<script src=/godot_recipes/3.x/js/search.js?1680630046 defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=/godot_recipes/3.x/index.html><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class="topics enlarge morespace"><li data-nav-id=/godot_recipes/3.x/recent/index.html><a class=padding href=/godot_recipes/3.x/recent/index.html><i class='fas fa-newspaper fa-fw'></i>&nbspFresh Recipes</a></li><li data-nav-id=/godot_recipes/3.x/g101/index.html><a class=padding href=/godot_recipes/3.x/g101/index.html><i class='fas fa-graduation-cap fa-fw'></i>&nbspGodot 101</a><ul id=subsections-74bb066550fdd557e545ca0364fa72e4 class=morespace><li data-nav-id=/godot_recipes/3.x/g101/start/index.html class=alwaysopen><a class=padding href=/godot_recipes/3.x/g101/start/index.html><i class='fas fa-feather-alt fa-fw'></i>&nbspGetting Started</a><ul id=subsections-d90887605597c7bd159bbfa26c60c6f2 class=morespace><li data-nav-id=/godot_recipes/3.x/g101/start/101_01/index.html><a class=padding href=/godot_recipes/3.x/g101/start/101_01/index.html>01. What is Godot?</a></li><li data-nav-id=/godot_recipes/3.x/g101/start/101_02/index.html><a class=padding href=/godot_recipes/3.x/g101/start/101_02/index.html>02. The Godot Editor</a></li><li data-nav-id=/godot_recipes/3.x/g101/start/101_03/index.html><a class=padding href=/godot_recipes/3.x/g101/start/101_03/index.html>03. Nodes</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/g101/gdscript/index.html class=alwaysopen><a class=padding href=/godot_recipes/3.x/g101/gdscript/index.html><i class='fas fa-scroll fa-fw'></i>&nbspGDScript</a><ul id=subsections-60c18fe706d6c1be2557fa194d133501 class=morespace><li data-nav-id=/godot_recipes/3.x/g101/gdscript/gdscript_start/index.html><a class=padding href=/godot_recipes/3.x/g101/gdscript/gdscript_start/index.html>GDScript: Getting started</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/g101/3d/index.html class=alwaysopen><a class=padding href=/godot_recipes/3.x/g101/3d/index.html><i class='fas fa-cube fa-fw'></i>&nbspIntro to 3D</a><ul id=subsections-bf1aaddf389c97b876b2817edf0c379e class=morespace><li data-nav-id=/godot_recipes/3.x/g101/3d/101_3d_01/index.html><a class=padding href=/godot_recipes/3.x/g101/3d/101_3d_01/index.html>01. The 3D Editor</a></li><li data-nav-id=/godot_recipes/3.x/g101/3d/101_3d_02/index.html><a class=padding href=/godot_recipes/3.x/g101/3d/101_3d_02/index.html>02. Importing 3D Objects</a></li><li data-nav-id=/godot_recipes/3.x/g101/3d/101_3d_03/index.html><a class=padding href=/godot_recipes/3.x/g101/3d/101_3d_03/index.html>03. Creating a 3D Character</a></li><li data-nav-id=/godot_recipes/3.x/g101/3d/101_3d_04/index.html><a class=padding href=/godot_recipes/3.x/g101/3d/101_3d_04/index.html>04. Using Areas</a></li><li data-nav-id=/godot_recipes/3.x/g101/3d/101_3d_05/index.html><a class=padding href=/godot_recipes/3.x/g101/3d/101_3d_05/index.html>05. Edge Detection & Mouse Capture</a></li><li data-nav-id=/godot_recipes/3.x/g101/3d/101_3d_06/index.html><a class=padding href=/godot_recipes/3.x/g101/3d/101_3d_06/index.html>06. Using CSG</a></li><li data-nav-id=/godot_recipes/3.x/g101/3d/101_3d_07/index.html><a class=padding href=/godot_recipes/3.x/g101/3d/101_3d_07/index.html>07. First-person Character</a></li></ul></li></ul></li><li data-nav-id=/godot_recipes/3.x/basics/index.html><a class=padding href=/godot_recipes/3.x/basics/index.html><i class='fas fa-toolbox fa-fw'></i>&nbspBasics</a><ul id=subsections-3494ad44d160b070fd31576fe4a3841e class=morespace><li data-nav-id=/godot_recipes/3.x/basics/tree_ready_order/index.html><a class=padding href=/godot_recipes/3.x/basics/tree_ready_order/index.html>Understanding tree order</a></li><li data-nav-id=/godot_recipes/3.x/basics/node_communication/index.html><a class=padding href=/godot_recipes/3.x/basics/node_communication/index.html>Node communication (the right way)</a></li><li data-nav-id=/godot_recipes/3.x/basics/getting_nodes/index.html><a class=padding href=/godot_recipes/3.x/basics/getting_nodes/index.html>Understanding node paths</a></li><li data-nav-id=/godot_recipes/3.x/basics/understanding_delta/index.html><a class=padding href=/godot_recipes/3.x/basics/understanding_delta/index.html>Understanding 'delta'</a></li><li data-nav-id=/godot_recipes/3.x/basics/file_io/index.html><a class=padding href=/godot_recipes/3.x/basics/file_io/index.html>Saving/loading data</a></li><li data-nav-id=/godot_recipes/3.x/basics/rotation/index.html><a class=padding href=/godot_recipes/3.x/basics/rotation/index.html>Circular movement</a></li><li data-nav-id=/godot_recipes/3.x/basics/custom_resources/index.html><a class=padding href=/godot_recipes/3.x/basics/custom_resources/index.html>Using Custom Resources</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/kyn/index.html><a class=padding href=/godot_recipes/3.x/kyn/index.html><i class='far fa-circle fa-fw'></i>&nbspKnow Your Nodes</a><ul id=subsections-b273756d786e2f81fb17b5adab12b219 class=morespace><li data-nav-id=/godot_recipes/3.x/kyn/label/index.html><a class=padding href=/godot_recipes/3.x/kyn/label/index.html>Label</a></li><li data-nav-id=/godot_recipes/3.x/kyn/path2d/index.html><a class=padding href=/godot_recipes/3.x/kyn/path2d/index.html>Path2D & PathFollow2D</a></li><li data-nav-id=/godot_recipes/3.x/kyn/raycast2d/index.html><a class=padding href=/godot_recipes/3.x/kyn/raycast2d/index.html>RayCast2D</a></li><li data-nav-id=/godot_recipes/3.x/kyn/rigidbody2d/index.html><a class=padding href=/godot_recipes/3.x/kyn/rigidbody2d/index.html>RigidBody2D</a></li><li data-nav-id=/godot_recipes/3.x/kyn/ysort/index.html><a class=padding href=/godot_recipes/3.x/kyn/ysort/index.html>YSort</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/2d/index.html><a class=padding href=/godot_recipes/3.x/2d/index.html><i class='fas fa-shapes fa-fw'></i>&nbsp2D</a><ul id=subsections-683012a9f0c523989fb31fe659049d1f class=morespace><li data-nav-id=/godot_recipes/3.x/2d/8_direction/index.html><a class=padding href=/godot_recipes/3.x/2d/8_direction/index.html>8-Directional Movement/Animation</a></li><li data-nav-id=/godot_recipes/3.x/2d/enter_exit_screen/index.html><a class=padding href=/godot_recipes/3.x/2d/enter_exit_screen/index.html>Entering/Exiting the screen</a></li><li data-nav-id=/godot_recipes/3.x/2d/platform_character/index.html><a class=padding href=/godot_recipes/3.x/2d/platform_character/index.html>Platform character</a></li><li data-nav-id=/godot_recipes/3.x/2d/screen_wrap/index.html><a class=padding href=/godot_recipes/3.x/2d/screen_wrap/index.html>Screen wrap</a></li><li data-nav-id=/godot_recipes/3.x/2d/splitscreen_demo/index.html><a class=padding href=/godot_recipes/3.x/2d/splitscreen_demo/index.html>Splitscreen multiplayer</a></li><li data-nav-id=/godot_recipes/3.x/2d/tilemap_collision/index.html><a class=padding href=/godot_recipes/3.x/2d/tilemap_collision/index.html>TileMap: detecting tiles</a></li><li data-nav-id=/godot_recipes/3.x/2d/topdown_movement/index.html><a class=padding href=/godot_recipes/3.x/2d/topdown_movement/index.html>Top-down movement</a></li><li data-nav-id=/godot_recipes/3.x/2d/grid_movement/index.html><a class=padding href=/godot_recipes/3.x/2d/grid_movement/index.html>Grid-based movement</a></li><li data-nav-id=/godot_recipes/3.x/2d/car_steering/index.html><a class=padding href=/godot_recipes/3.x/2d/car_steering/index.html>Car steering</a></li><li data-nav-id=/godot_recipes/3.x/2d/autotile_intro/index.html><a class=padding href=/godot_recipes/3.x/2d/autotile_intro/index.html>TileMap: using autotile</a></li><li data-nav-id=/godot_recipes/3.x/2d/2d_align_surface/index.html><a class=padding href=/godot_recipes/3.x/2d/2d_align_surface/index.html>KinematicBody2D: align with surface</a></li><li data-nav-id=/godot_recipes/3.x/2d/moving_platforms/index.html><a class=padding href=/godot_recipes/3.x/2d/moving_platforms/index.html>Moving Platforms</a></li><li data-nav-id=/godot_recipes/3.x/2d/2d_shooting/index.html><a class=padding href=/godot_recipes/3.x/2d/2d_shooting/index.html>Shooting projectiles</a></li><li data-nav-id=/godot_recipes/3.x/2d/tilemap_animation/index.html><a class=padding href=/godot_recipes/3.x/2d/tilemap_animation/index.html>TileMap: animated tiles</a></li><li data-nav-id=/godot_recipes/3.x/2d/screen_shake/index.html><a class=padding href=/godot_recipes/3.x/2d/screen_shake/index.html>Screen Shake</a></li><li data-nav-id=/godot_recipes/3.x/2d/multi_target_camera/index.html><a class=padding href=/godot_recipes/3.x/2d/multi_target_camera/index.html>Multitarget Camera</a></li><li data-nav-id=/godot_recipes/3.x/2d/ballistic_bullet/index.html><a class=padding href=/godot_recipes/3.x/2d/ballistic_bullet/index.html>Ballistic bullet</a></li><li data-nav-id=/godot_recipes/3.x/2d/line_collision/index.html><a class=padding href=/godot_recipes/3.x/2d/line_collision/index.html>Line2D Collision</a></li><li data-nav-id=/godot_recipes/3.x/2d/touchscreen_camera/index.html><a class=padding href=/godot_recipes/3.x/2d/touchscreen_camera/index.html>Touchscreen Camera</a></li><li data-nav-id=/godot_recipes/3.x/2d/2d_draw_trajectory/index.html><a class=padding href=/godot_recipes/3.x/2d/2d_draw_trajectory/index.html>Draw trajectory</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/3d/index.html><a class=padding href=/godot_recipes/3.x/3d/index.html><i class='fas fa-cube fa-fw'></i>&nbsp3D</a><ul id=subsections-78175ff9e655faea625396c9d3e9c754 class=morespace><li data-nav-id=/godot_recipes/3.x/3d/camera_gimbal/index.html><a class=padding href=/godot_recipes/3.x/3d/camera_gimbal/index.html>Camera Gimbal</a></li><li data-nav-id=/godot_recipes/3.x/3d/interpolated_camera/index.html><a class=padding href=/godot_recipes/3.x/3d/interpolated_camera/index.html>Interpolated Camera</a></li><li data-nav-id=/godot_recipes/3.x/3d/kinematic_body/index.html><a class=padding href=/godot_recipes/3.x/3d/kinematic_body/index.html>KinematicBody: Movement</a></li><li data-nav-id=/godot_recipes/3.x/3d/healthbars/index.html><a class=padding href=/godot_recipes/3.x/3d/healthbars/index.html>3D Unit Healthbars</a></li><li data-nav-id=/godot_recipes/3.x/3d/3d_shooting/index.html><a class=padding href=/godot_recipes/3.x/3d/3d_shooting/index.html>Shooting projectiles</a></li><li data-nav-id=/godot_recipes/3.x/3d/rolling_cube/index.html><a class=padding href=/godot_recipes/3.x/3d/rolling_cube/index.html>Rolling Cube</a></li><li data-nav-id=/godot_recipes/3.x/3d/move_with_camera/index.html><a class=padding href=/godot_recipes/3.x/3d/move_with_camera/index.html>Align Movement with Camera</a></li><li data-nav-id=/godot_recipes/3.x/3d/simple_airplane/index.html><a class=padding href=/godot_recipes/3.x/3d/simple_airplane/index.html>Simplified Airplane Controller</a></li><li data-nav-id=/godot_recipes/3.x/3d/spaceship/index.html><a class=padding href=/godot_recipes/3.x/3d/spaceship/index.html>Arcade-style Spaceship</a></li><li data-nav-id=/godot_recipes/3.x/3d/debug_overlay/index.html><a class=padding href=/godot_recipes/3.x/3d/debug_overlay/index.html>Drawing Vectors in 3D</a></li><li data-nav-id=/godot_recipes/3.x/3d/click_to_move/index.html><a class=padding href=/godot_recipes/3.x/3d/click_to_move/index.html>Click to move</a></li><li data-nav-id=/godot_recipes/3.x/3d/3d_sphere_car/index.html><a class=padding href=/godot_recipes/3.x/3d/3d_sphere_car/index.html>Quick Arcade-style Car</a></li><li data-nav-id=/godot_recipes/3.x/3d/rotate_interpolate/index.html><a class=padding href=/godot_recipes/3.x/3d/rotate_interpolate/index.html>Smooth rotation</a></li><li data-nav-id=/godot_recipes/3.x/3d/3d_align_surface/index.html><a class=padding href=/godot_recipes/3.x/3d/3d_align_surface/index.html>KinematicBody: align with surface</a></li><li data-nav-id=/godot_recipes/3.x/3d/kinematic_car/index.html class=alwaysopen><a class=padding href=/godot_recipes/3.x/3d/kinematic_car/index.html><i class='fas fa-car'></i>&nbsp3D Kinematic Car</a><ul id=subsections-a154e17923e6084650750a2d1066489b class=morespace><li data-nav-id=/godot_recipes/3.x/3d/kinematic_car/car_base/index.html><a class=padding href=/godot_recipes/3.x/3d/kinematic_car/car_base/index.html>3D Kinematic Car: Base</a></li><li data-nav-id=/godot_recipes/3.x/3d/kinematic_car/car_traction/index.html><a class=padding href=/godot_recipes/3.x/3d/kinematic_car/car_traction/index.html>3D Kinematic Car: Traction/Drifting</a></li><li data-nav-id=/godot_recipes/3.x/3d/kinematic_car/car_camera/index.html><a class=padding href=/godot_recipes/3.x/3d/kinematic_car/car_camera/index.html>3D Kinematic Car: Chase Camera</a></li><li data-nav-id=/godot_recipes/3.x/3d/kinematic_car/car_slopes/index.html><a class=padding href=/godot_recipes/3.x/3d/kinematic_car/car_slopes/index.html>3D Kinematic Car: Slopes & Ramps</a></li></ul></li></ul></li><li data-nav-id=/godot_recipes/3.x/input/index.html><a class=padding href=/godot_recipes/3.x/input/index.html><i class='fas fa-gamepad fa-fw'></i>&nbspInput</a><ul id=subsections-22abd447332ef2d844de78c204432749 class=morespace><li data-nav-id=/godot_recipes/3.x/input/input_actions/index.html><a class=padding href=/godot_recipes/3.x/input/input_actions/index.html>Input Actions</a></li><li data-nav-id=/godot_recipes/3.x/input/mouse_input/index.html><a class=padding href=/godot_recipes/3.x/input/mouse_input/index.html>Mouse Input</a></li><li data-nav-id=/godot_recipes/3.x/input/custom_actions/index.html><a class=padding href=/godot_recipes/3.x/input/custom_actions/index.html>Adding Input Actions in code</a></li><li data-nav-id=/godot_recipes/3.x/input/mouse_capture/index.html><a class=padding href=/godot_recipes/3.x/input/mouse_capture/index.html>Capturing the Mouse</a></li><li data-nav-id=/godot_recipes/3.x/input/custom_mouse_cursor/index.html><a class=padding href=/godot_recipes/3.x/input/custom_mouse_cursor/index.html>Customizing the Mouse Cursor</a></li><li data-nav-id=/godot_recipes/3.x/input/multi_unit_select/index.html><a class=padding href=/godot_recipes/3.x/input/multi_unit_select/index.html>Mouse: Drag-select multiple units</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/animation/index.html><a class=padding href=/godot_recipes/3.x/animation/index.html><i class='fas fa-film fa-fw'></i>&nbspAnimation</a><ul id=subsections-71b61814707a51d6e332b6ddaecb9546 class=morespace><li data-nav-id=/godot_recipes/3.x/animation/spritesheet_animation/index.html><a class=padding href=/godot_recipes/3.x/animation/spritesheet_animation/index.html>Spritesheet animation</a></li><li data-nav-id=/godot_recipes/3.x/animation/melee_attacks/index.html><a class=padding href=/godot_recipes/3.x/animation/melee_attacks/index.html>Melee attacks</a></li><li data-nav-id=/godot_recipes/3.x/animation/animation_state_machine/index.html><a class=padding href=/godot_recipes/3.x/animation/animation_state_machine/index.html>Controlling animation states</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/ui/index.html><a class=padding href=/godot_recipes/3.x/ui/index.html><i class='far fa-window-maximize fa-fw'></i>&nbspUI</a><ul id=subsections-9adabbd1f346bf3cdced3def3e6632fa class=morespace><li data-nav-id=/godot_recipes/3.x/ui/labels/index.html><a class=padding href=/godot_recipes/3.x/ui/labels/index.html>Labels</a></li><li data-nav-id=/godot_recipes/3.x/ui/containers/index.html><a class=padding href=/godot_recipes/3.x/ui/containers/index.html>Containers</a></li><li data-nav-id=/godot_recipes/3.x/ui/cooldown_button/index.html><a class=padding href=/godot_recipes/3.x/ui/cooldown_button/index.html>Cooldown Button</a></li><li data-nav-id=/godot_recipes/3.x/ui/heart_containers_3/index.html><a class=padding href=/godot_recipes/3.x/ui/heart_containers_3/index.html>Heart Containers: 3 Ways</a></li><li data-nav-id=/godot_recipes/3.x/ui/debug_overlay/index.html><a class=padding href=/godot_recipes/3.x/ui/debug_overlay/index.html>Displaying debug data</a></li><li data-nav-id=/godot_recipes/3.x/ui/unit_healthbar/index.html><a class=padding href=/godot_recipes/3.x/ui/unit_healthbar/index.html>Object Healthbars</a></li><li data-nav-id=/godot_recipes/3.x/ui/floating_text/index.html><a class=padding href=/godot_recipes/3.x/ui/floating_text/index.html>Floating combat text</a></li><li data-nav-id=/godot_recipes/3.x/ui/level_select/index.html><a class=padding href=/godot_recipes/3.x/ui/level_select/index.html>Level Select Menu</a></li><li data-nav-id=/godot_recipes/3.x/ui/minimap/index.html><a class=padding href=/godot_recipes/3.x/ui/minimap/index.html>Minimap/radar</a></li><li data-nav-id=/godot_recipes/3.x/ui/radial_menu/index.html><a class=padding href=/godot_recipes/3.x/ui/radial_menu/index.html>Radial Popup Menu</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/math/index.html><a class=padding href=/godot_recipes/3.x/math/index.html><i class='fas fa-rocket fa-fw'></i>&nbspGamedev Math</a><ul id=subsections-12ba258c739ed8a31054d63f259d21cf class=morespace><li data-nav-id=/godot_recipes/3.x/math/interpolation/index.html><a class=padding href=/godot_recipes/3.x/math/interpolation/index.html>Interpolation</a></li><li data-nav-id=/godot_recipes/3.x/math/transforms/index.html><a class=padding href=/godot_recipes/3.x/math/transforms/index.html>Transforms</a></li><li data-nav-id=/godot_recipes/3.x/math/noise/index.html><a class=padding href=/godot_recipes/3.x/math/noise/index.html>Noise</a></li><li data-nav-id=/godot_recipes/3.x/math/dot_cross_product/index.html><a class=padding href=/godot_recipes/3.x/math/dot_cross_product/index.html>Vectors: Using Dot and Cross Product</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/recipes/index.html><a class=padding href=/godot_recipes/3.x/recipes/index.html><i class='fas fa-box-open'></i>&nbspMisc</a><ul id=subsections-a77c2463079ade5a4da2488003b2aa6e class=morespace><li data-nav-id=/godot_recipes/3.x/recipes/singleton/index.html><a class=padding href=/godot_recipes/3.x/recipes/singleton/index.html>Autoloads/ Singletons</a></li><li data-nav-id=/godot_recipes/3.x/recipes/godot3_inheritance/index.html><a class=padding href=/godot_recipes/3.x/recipes/godot3_inheritance/index.html>Inheritance</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/physics/index.html><a class=padding href=/godot_recipes/3.x/physics/index.html><i class='fas fa-atom fa-fw'></i>&nbspPhysics</a><ul id=subsections-e7cfe3d2127c77d408f29ad616291b1e class=morespace><li data-nav-id=/godot_recipes/3.x/physics/kinematic_friction/index.html><a class=padding href=/godot_recipes/3.x/physics/kinematic_friction/index.html>Kinematic Friction</a></li><li data-nav-id=/godot_recipes/3.x/physics/kinematicbody_slopes/index.html><a class=padding href=/godot_recipes/3.x/physics/kinematicbody_slopes/index.html>KinematicBody: Stopping on Slopes</a></li><li data-nav-id=/godot_recipes/3.x/physics/rigidbody_drag_drop/index.html><a class=padding href=/godot_recipes/3.x/physics/rigidbody_drag_drop/index.html>RigidBody2D: Drag and Drop</a></li><li data-nav-id=/godot_recipes/3.x/physics/kinematic_to_rigidbody/index.html><a class=padding href=/godot_recipes/3.x/physics/kinematic_to_rigidbody/index.html>Kinematic to Rigid Body Interaction</a></li><li data-nav-id=/godot_recipes/3.x/physics/joints_2d/index.html><a class=padding href=/godot_recipes/3.x/physics/joints_2d/index.html>Using 2D Joints</a></li><li data-nav-id=/godot_recipes/3.x/physics/conveyor_belt/index.html><a class=padding href=/godot_recipes/3.x/physics/conveyor_belt/index.html>Conveyor Belt</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/ai/index.html class=parent><a class=padding href=/godot_recipes/3.x/ai/index.html><i class='fas fa-project-diagram fa-fw'></i>&nbspAI/Behavior</a><ul id=subsections-22ee2eca2a6f1f193c2796a2a380573a class=morespace><li data-nav-id=/godot_recipes/3.x/ai/chase/index.html><a class=padding href=/godot_recipes/3.x/ai/chase/index.html>Chasing the player</a></li><li data-nav-id=/godot_recipes/3.x/ai/path_follow/index.html><a class=padding href=/godot_recipes/3.x/ai/path_follow/index.html>Path following</a></li><li data-nav-id=/godot_recipes/3.x/ai/changing_behaviors/index.html><a class=padding href=/godot_recipes/3.x/ai/changing_behaviors/index.html>Changing behaviors</a></li><li data-nav-id=/godot_recipes/3.x/ai/homing_missile/index.html><a class=padding href=/godot_recipes/3.x/ai/homing_missile/index.html>Homing missile</a></li><li data-nav-id=/godot_recipes/3.x/ai/context_map/index.html class=active><a class=padding href=/godot_recipes/3.x/ai/context_map/index.html>Context-based steering</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/shaders/index.html><a class=padding href=/godot_recipes/3.x/shaders/index.html><i class='fas fa-draw-polygon fa-fw'></i>&nbspShaders</a><ul id=subsections-7dbddbd28e5efb1c3eb9ca3b5aba0537 class=morespace><li data-nav-id=/godot_recipes/3.x/shaders/intro/index.html><a class=padding href=/godot_recipes/3.x/shaders/intro/index.html>Shaders: intro</a></li><li data-nav-id=/godot_recipes/3.x/shaders/interacting/index.html><a class=padding href=/godot_recipes/3.x/shaders/interacting/index.html>Interacting with Shaders</a></li><li data-nav-id=/godot_recipes/3.x/shaders/greyscale/index.html><a class=padding href=/godot_recipes/3.x/shaders/greyscale/index.html>Greyscale (monochrome) shader</a></li><li data-nav-id=/godot_recipes/3.x/shaders/blur/index.html><a class=padding href=/godot_recipes/3.x/shaders/blur/index.html>Blur shader</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/audio/index.html><a class=padding href=/godot_recipes/3.x/audio/index.html><i class='fas fa-volume-up fa-fw'></i>&nbspAudio</a><ul id=subsections-f17357627c14227ed62353b065c976c0 class=morespace><li data-nav-id=/godot_recipes/3.x/audio/audio_manager/index.html><a class=padding href=/godot_recipes/3.x/audio/audio_manager/index.html>Audio Manager</a></li></ul></li><li data-nav-id=/godot_recipes/3.x/export/index.html><a class=padding href=/godot_recipes/3.x/export/index.html><i class='fas fa-file-export fa-fw'></i>&nbspExporting</a></li><li data-nav-id=/godot_recipes/3.x/games/index.html><a class=padding href=/godot_recipes/3.x/games/index.html><i class='fas fa-chess-pawn fa-fw'></i>&nbspGame Tutorials</a><ul id=subsections-dcab5a097c2e0bc19131dd59a2fac20e class=morespace><li data-nav-id=/godot_recipes/3.x/games/circle_jump/index.html class=alwaysopen><a class=padding href=/godot_recipes/3.x/games/circle_jump/index.html><i class='far fa-circle fa-fw'></i>&nbspMobile Game: Circle Jump</a><ul id=subsections-129a3d01c752e256269f2f6b8f4310be class=morespace><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_01/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_01/index.html>01. Project setup</a></li><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_02/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_02/index.html>02. Spawning Circles</a></li><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_03/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_03/index.html>03. Limited circles</a></li><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_04/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_04/index.html>04. Menus</a></li><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_05/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_05/index.html>05. Score and HUD</a></li><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_06/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_06/index.html>06. Sound and Colors</a></li><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_07/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_07/index.html>07. Moving circles</a></li><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_11/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_11/index.html>11. Mobile ads</a></li><li data-nav-id=/godot_recipes/3.x/games/circle_jump/circle_jump_12/index.html><a class=padding href=/godot_recipes/3.x/games/circle_jump/circle_jump_12/index.html>12. Saving settings</a></li></ul></li></ul></li></ul><div id=shortcuts><div class="nav-title padding">More</div><ul class=space><li><a class=padding href=https://github.com/kidscancode/godot_recipes><i class='fab fa-fw fa-github'></i> GitHub repo</a></li><li><a class=padding href=https://docs.godotengine.org/><i class='fas fa-fw fa-bookmark'></i> Godot Docs</a></li><li><a class=padding href=/godot_recipes/3.x/tags><i class='fas fa-tags'></i>&nbsp;Tags</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch"><ul><li id=select-language-container class=footerLangSwitch><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></div></li><li id=select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=auto value=auto selected>Auto</option><option id=relearn-light value=relearn-light>Relearn Light</option><option id=relearn-dark value=relearn-dark>Relearn Dark</option><option id=neon value=neon>Neon</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i><span>&nbsp;</span>Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=/godot_recipes/3.x/js/clipboard.min.js?1680630046 defer></script>
<script src=/godot_recipes/3.x/js/perfect-scrollbar.min.js?1680630046 defer></script>
<script src=/godot_recipes/3.x/js/theme.js?1680630046 defer></script></body></html>